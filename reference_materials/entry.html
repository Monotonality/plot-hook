{% extends 'item.html' %}

{% block title %}Entry - Plot Hook{% endblock %}

{% block page_title %}Entry Title{% endblock %}

{% block content %}
<div class="entry-layout">
    <!-- Main content area -->
    <div class="entry-content-area">
        <div class="content-scroll-container">
            <div class="content-text">
                <h1>Entry Title</h1>
                <p>This is the main content area where the entry text will be displayed. It can contain paragraphs, headings, lists, and other formatted content.</p>
                
                <h2>Section Heading</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                
                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                
                <h3>Subsection</h3>
                <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
                
                <ul>
                    <li>First item in a list</li>
                    <li>Second item with more detail</li>
                    <li>Third item that might be longer</li>
                </ul>
                
                <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
                
                <h2>Another Section</h2>
                <p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.</p>
                
                <blockquote>
                    <p>This is a blockquote that highlights important information or quotes from the content.</p>
                </blockquote>
                
                <p>Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur.</p>
            </div>
        </div>
    </div>
    
    <!-- Right sidebar with category-style cards -->
    <div class="entry-sidebar">
        <div class="campaigns-grid">
            <!-- Sample Item Card 1 -->
            <div class="campaign-card">
                <div class="campaign-pattern pattern-red">
                    <div class="campaign-badge badge-red">CAT</div>
                </div>
                <div class="campaign-info">
                    <div class="campaign-title"><span class="title-text">Sample Item</span></div>
                    <div class="campaign-meta">
                        <div class="campaign-stats">Creator • super</div>
                        <div class="items-count">5 Items</div>
                    </div>
                    <div class="campaign-actions">
                        <div class="tags-container">
                            <span class="tag">Tag 1</span>
                            <span class="tag">Tag 2</span>
                        </div>
                        <button class="campaign-menu">⋮</button>
                    </div>
                </div>
            </div>
            
            <!-- Sample Item Card 2 -->
            <div class="campaign-card">
                <div class="campaign-pattern pattern-blue">
                    <div class="campaign-badge badge-blue">ITM</div>
                </div>
                <div class="campaign-info">
                    <div class="campaign-title"><span class="title-text">Another Item</span></div>
                    <div class="campaign-meta">
                        <div class="campaign-stats">Editor • admin</div>
                        <div class="items-count">12 Items</div>
                    </div>
                    <div class="campaign-actions">
                        <div class="tags-container">
                            <span class="tag">Tag 1</span>
                            <span class="tag">Tag 3</span>
                        </div>
                        <button class="campaign-menu">⋮</button>
                    </div>
                </div>
            </div>
            
            <!-- Sample Item Card 3 -->
            <div class="campaign-card">
                <div class="campaign-pattern pattern-red">
                    <div class="campaign-badge badge-red">DOC</div>
                </div>
                <div class="campaign-info">
                    <div class="campaign-title"><span class="title-text">Document Item</span></div>
                    <div class="campaign-meta">
                        <div class="campaign-stats">Viewer • user</div>
                        <div class="items-count">8 Items</div>
                    </div>
                    <div class="campaign-actions">
                        <div class="tags-container">
                            <span class="tag">Tag 2</span>
                        </div>
                        <button class="campaign-menu">⋮</button>
                    </div>
                </div>
            </div>
            
            <!-- Sample Item Card 4 -->
            <div class="campaign-card">
                <div class="campaign-pattern pattern-blue">
                    <div class="campaign-badge badge-blue">IMG</div>
                </div>
                <div class="campaign-info">
                    <div class="campaign-title"><span class="title-text">Image Item</span></div>
                    <div class="campaign-meta">
                        <div class="campaign-stats">Owner • super</div>
                        <div class="items-count">15 Items</div>
                    </div>
                    <div class="campaign-actions">
                        <div class="tags-container">
                            <span class="tag">Tag 1</span>
                            <span class="tag">Tag 2</span>
                            <span class="tag">Tag 3</span>
                        </div>
                        <button class="campaign-menu">⋮</button>
                    </div>
                </div>
            </div>
            
            <!-- Sample Item Card 5 -->
            <div class="campaign-card">
                <div class="campaign-pattern pattern-red">
                    <div class="campaign-badge badge-red">VID</div>
                </div>
                <div class="campaign-info">
                    <div class="campaign-title"><span class="title-text">Video Item</span></div>
                    <div class="campaign-meta">
                        <div class="campaign-stats">Creator • admin</div>
                        <div class="items-count">3 Items</div>
                    </div>
                    <div class="campaign-actions">
                        <div class="tags-container">
                            <span class="tag">Tag 1</span>
                            <span class="tag">Tag 3</span>
                        </div>
                        <button class="campaign-menu">⋮</button>
                    </div>
                </div>
            </div>
            
            <!-- Create New Item Card -->
            <div class="campaign-card create-card">
                <div class="create-card-content">
                    <div class="create-icon">+</div>
                    <div class="create-text">Create New Item</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Info cards section below content -->
<div class="info-cards-section">
    <div class="info-cards-container">
        <div class="info-card">
            <div class="card-header">
                <h3 class="card-title">Related Entries</h3>
                <span class="card-count">3</span>
            </div>
            <div class="card-content">
                <div class="entry-link">
                    <a href="#" class="link-title">Character Profile: John Doe</a>
                    <span class="link-category">Characters</span>
                </div>
                <div class="entry-link">
                    <a href="#" class="link-title">Location: The Old Tavern</a>
                    <span class="link-category">Locations</span>
                </div>
                <div class="entry-link">
                    <a href="#" class="link-title">Event: The Great Storm</a>
                    <span class="link-category">Events</span>
                </div>
            </div>
        </div>
        
        <div class="info-card">
            <div class="card-header">
                <h3 class="card-title">Quick Actions</h3>
            </div>
            <div class="card-content">
                <button class="action-btn primary">Edit Entry</button>
                <button class="action-btn secondary">View History</button>
                <button class="action-btn danger">Delete Entry</button>
            </div>
        </div>
        
        <div class="info-card">
            <div class="card-header">
                <h3 class="card-title">Entry Details</h3>
            </div>
            <div class="card-content">
                <div class="detail-item">
                    <span class="detail-label">Created:</span>
                    <span class="detail-value">August 31, 2025</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Modified:</span>
                    <span class="detail-value">August 31, 2025</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Author:</span>
                    <span class="detail-value">Admin User</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Category:</span>
                    <span class="detail-value">World Building</span>
                </div>
            </div>
        </div>
        
        <div class="info-card">
            <div class="card-header">
                <h3 class="card-title">Tags</h3>
            </div>
            <div class="card-content">
                <div class="tags-container">
                    <span class="tag">Fantasy</span>
                    <span class="tag">World Building</span>
                    <span class="tag">Characters</span>
                    <span class="tag">Plot</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_head %}
<style>
/* Hide main page scrollbar but keep scrolling */
body {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
}

body::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

/* Reveal scrollbar on hover near right edge */
body:hover::-webkit-scrollbar {
    display: block;
    width: 8px;
}

body:hover::-webkit-scrollbar-track {
    background: #2a2a2a;
    border-radius: 4px;
}

body:hover::-webkit-scrollbar-thumb {
    background: #404040;
    border-radius: 4px;
    transition: background 0.3s ease;
}

body:hover::-webkit-scrollbar-thumb:hover {
    background: #8b7355;
}

.main-content {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
}

.main-content::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

.content-section {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
}

.content-section::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}
.entry-layout {
    display: flex;
    gap: 30px;
    max-width: 1600px;
    margin: 0 auto;
    padding: 5px 20px;
    min-height: calc(100vh - 200px);
    overflow: hidden;
}

.entry-content-area {
    flex: 1;
    min-height: calc(100vh - 180px);
}

.info-cards-section {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    margin-top: 30px;
}

.info-cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}

/* Main content area */
.entry-content-area {
    background: #202020;
    border: 1px solid #404040;
    border-radius: 12px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: calc(100vh - 180px);
}

.content-scroll-container {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    max-height: 100%;
}

.content-text {
    max-width: 90%;
    margin: 0 auto;
    line-height: 1.7;
    color: #e8e6e3;
}

.content-text h1 {
    font-size: 2.5rem;
    font-weight: 700;
    color: #e8e6e3;
    margin-bottom: 30px;
    border-bottom: 2px solid #8b7355;
    padding-bottom: 15px;
}

.content-text h2 {
    font-size: 1.8rem;
    font-weight: 600;
    color: #e8e6e3;
    margin-top: 40px;
    margin-bottom: 20px;
    border-left: 4px solid #8b7355;
    padding-left: 15px;
}

.content-text h3 {
    font-size: 1.4rem;
    font-weight: 600;
    color: #e8e6e3;
    margin-top: 30px;
    margin-bottom: 15px;
}

.content-text p {
    margin-bottom: 20px;
    font-size: 1.1rem;
}

.content-text ul {
    margin: 20px 0;
    padding-left: 20px;
}

.content-text li {
    margin-bottom: 10px;
    font-size: 1.1rem;
}

.content-text blockquote {
    background: #2a2a2a;
    border-left: 4px solid #8b7355;
    padding: 20px;
    margin: 30px 0;
    font-style: italic;
    color: #a0a0a0;
    border-radius: 0 8px 8px 0;
}

/* Right sidebar with category-style cards */
.entry-sidebar {
    width: 300px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-height: calc(100vh - 200px);
    overflow-y: auto;
    padding: 10px;
    background: transparent;
    border: none;
    border-radius: 0;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 90%, transparent 100%);
    mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 90%, transparent 100%);
}

.entry-sidebar::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

/* Campaign Grid - from category template */
.campaigns-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
    transition: all 0.3s ease;
}

/* Campaign Card - from category template */
.campaign-card {
    background: #2a2a2a;
    border: 1px solid #404040;
    border-radius: 8px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease, all 0.3s ease;
    cursor: pointer;
    width: 100%;
    min-width: 0;
}

.campaign-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

/* Campaign Pattern - from category template */
.campaign-pattern {
    height: 60px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.pattern-red {
    background: linear-gradient(45deg, #dc2626 25%, transparent 25%), 
                linear-gradient(-45deg, #dc2626 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, #dc2626 75%), 
                linear-gradient(-45deg, transparent 75%, #dc2626 75%);
    background-size: 20px 20px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
}

.pattern-blue {
    background: linear-gradient(45deg, #3b82f6 25%, transparent 25%), 
                linear-gradient(-45deg, #3b82f6 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, #3b82f6 75%), 
                linear-gradient(-45deg, transparent 75%, #3b82f6 75%);
    background-size: 20px 20px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
}

/* Campaign Badge - from category template */
.campaign-badge {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: bold;
    color: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
}

.badge-red {
    background: #dc2626;
}

.badge-blue {
    background: #3b82f6;
}

/* Campaign Info - from category template */
.campaign-info {
    padding: 10px 12px 8px 12px;
}

.campaign-meta {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 10px;
    flex-wrap: nowrap;
}

.campaign-meta .campaign-stats {
    margin: 0;
    line-height: 1.1;
}

.items-count {
    color: #a0a0a0;
    font-size: 0.8rem;
    line-height: 1.1;
    white-space: nowrap;
}

.campaign-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: #e8e6e3;
    margin-bottom: 4px;
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* fallback */
    max-width: 100%;
    -webkit-mask-image: linear-gradient(to right, black 80%, transparent 100%);
            mask-image: linear-gradient(to right, black 80%, transparent 100%);
}

.campaign-title .title-text {
    display: inline-block;
    padding-right: 20px; /* space before fade */
    will-change: transform;
}

.campaign-stats {
    font-size: 0.75rem;
    color: #a0a0a0;
    margin-bottom: 8px;
}

.campaign-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
    margin-bottom: 0;
}

.campaign-menu {
    background: none;
    border: none;
    color: #a0a0a0;
    cursor: pointer;
    padding: 5px;
    font-size: 1.2rem;
}

.campaign-menu:hover {
    color: #e8e6e3;
}

/* Card Tags - match category.html styling */
.campaign-actions .tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 6px;
}

.campaign-actions .tag {
    background: #2e2e2e;
    color: #cfcfcf;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.72rem;
    border: 1px solid #3a3a3a;
    transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}

.campaign-actions .tag:hover {
    background: #3a3a3a;
    border-color: #4a4a4a;
}

/* Create Card Special Styling - from category template */
.create-card {
    border: 2px dashed #606060;
    background: #202020;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100px;
    width: 100%;
}

.create-card:hover {
    border-color: #8b7355;
    background: #282828;
}

.create-card-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    gap: 15px;
}

.create-icon {
    font-size: 2rem;
    font-weight: 300;
    color: #a0a0a0;
    line-height: 1;
}

.create-text {
    font-size: 1rem;
    font-weight: 500;
    color: #e8e6e3;
}

/* Info cards styling */

.info-card {
    background: #202020;
    border: 1px solid #404040;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
    max-height: 300px;
    display: flex;
    flex-direction: column;
}

.info-card:hover {
    border-color: #8b7355;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(139, 115, 85, 0.1);
}

.card-header {
    background: #2a2a2a;
    padding: 10px 20px;
    border-bottom: 1px solid #404040;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-title {
    font-size: 1rem;
    font-weight: 600;
    color: #e8e6e3;
    margin: 0;
}

.card-count {
    background: #8b7355;
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.8rem;
    font-weight: 500;
}

.card-content {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
}

.card-content::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

/* Entry links */
.entry-link {
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid #404040;
}

.entry-link:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.link-title {
    display: block;
    color: #e8e6e3;
    text-decoration: none;
    font-weight: 500;
    margin-bottom: 5px;
    transition: color 0.3s ease;
}

.link-title:hover {
    color: #8b7355;
}

.link-category {
    font-size: 0.8rem;
    color: #a0a0a0;
    background: #404040;
    padding: 2px 8px;
    border-radius: 4px;
}

/* Action buttons */
.action-btn {
    display: block;
    width: 100%;
    padding: 10px 15px;
    border: none;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 10px;
}

.action-btn:last-child {
    margin-bottom: 0;
}

.action-btn.primary {
    background: #8b7355;
    color: white;
}

.action-btn.primary:hover {
    background: #9b8365;
}

.action-btn.secondary {
    background: #404040;
    color: #e8e6e3;
}

.action-btn.secondary:hover {
    background: #505050;
}

.action-btn.danger {
    background: #dc3545;
    color: white;
}

.action-btn.danger:hover {
    background: #c82333;
}

/* Detail items */
.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid #404040;
}

.detail-item:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.detail-label {
    font-size: 0.9rem;
    color: #a0a0a0;
    font-weight: 500;
}

.detail-value {
    font-size: 0.9rem;
    color: #e8e6e3;
    font-weight: 400;
}

/* Tags */
.tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.tag {
    background: #404040;
    color: #e8e6e3;
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 0.8rem;
    border: 1px solid #505050;
    transition: all 0.3s ease;
}

.tag:hover {
    background: #8b7355;
    border-color: #8b7355;
}

/* Scrollbar styling */
.content-scroll-container::-webkit-scrollbar,
.entry-sidebar::-webkit-scrollbar {
    width: 8px;
}

.content-scroll-container::-webkit-scrollbar-track,
.entry-sidebar::-webkit-scrollbar-track {
    background: #2a2a2a;
}

.content-scroll-container::-webkit-scrollbar-thumb,
.entry-sidebar::-webkit-scrollbar-thumb {
    background: #404040;
    border-radius: 4px;
}

.content-scroll-container::-webkit-scrollbar-thumb:hover,
.entry-sidebar::-webkit-scrollbar-thumb:hover {
    background: #8b7355;
}

/* Responsive design */
@media (max-width: 1200px) {
    .entry-layout {
        flex-direction: column;
        gap: 20px;
    }
    
    .entry-sidebar {
        width: 100%;
    }
    
    .campaigns-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 15px;
    }
    
    .info-cards-container {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
}

@media (max-width: 900px) {
    .campaigns-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 12px;
    }
    
    .info-cards-container {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
}

@media (max-width: 768px) {
    .entry-layout {
        padding: 15px;
    }
    
    .entry-content-area {
        padding: 15px;
    }
    
    .content-scroll-container {
        padding: 20px;
    }
    
    .content-text h1 {
        font-size: 2rem;
    }
    
    .content-text h2 {
        font-size: 1.5rem;
    }
    
    .campaigns-grid {
        grid-template-columns: 1fr;
        gap: 10px;
    }
    
    .info-cards-container {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 480px) {
    .entry-layout {
        padding: 10px;
    }
    
    .campaigns-grid {
        gap: 8px;
    }
    
    .campaign-card {
        min-width: 0;
        width: 100%;
    }
}
</style>

<script>
// Title hover scroll for overflowing text
function setupTitleHoverScroll() {
    const cards = document.querySelectorAll('.campaign-card');
    cards.forEach((card) => {
        const container = card.querySelector('.campaign-title');
        const span = container && container.querySelector('.title-text');
        if (!container || !span) return;

        let rafId = null;
        let startTime = null;
        const durationMs = 16000; // slower scroll
        let distance = 0;

        const reset = () => {
            if (rafId) cancelAnimationFrame(rafId);
            rafId = null;
            startTime = null;
            span.style.transform = 'translateX(0)';
        };

        const animate = (ts) => {
            if (startTime === null) startTime = ts;
            const elapsed = ts - startTime;
            const t = Math.min(elapsed / durationMs, 1);
            span.style.transform = `translateX(${-distance * t}px)`;
            if (t < 1) {
                rafId = requestAnimationFrame(animate);
            } else {
                // scroll back
                startTime = null;
                const back = (ts2) => {
                    if (startTime === null) startTime = ts2;
                    const e2 = ts2 - startTime;
                    const t2 = Math.min(e2 / durationMs, 1);
                    span.style.transform = `translateX(${-distance * (1 - t2)}px)`;
                    if (t2 < 1) rafId = requestAnimationFrame(back);
                };
                rafId = requestAnimationFrame(back);
            }
        };

        card.addEventListener('mouseenter', () => {
            const overflow = span.scrollWidth - container.clientWidth;
            if (overflow > 4) {
                distance = overflow;
                reset();
                rafId = requestAnimationFrame(animate);
            }
        });

        card.addEventListener('mouseleave', reset);
    });
}

document.addEventListener('DOMContentLoaded', setupTitleHoverScroll);
</script>
{% endblock %}


